myApp.controller("BlogController",function($scope,$http,$location,$rootScope)
{
	$scope.blog={"blogId":0,"blogName":"","blogContent":"","username":"","createDate":"","status":"","likes":0,"dislikes":0};
	
	$scope.blogDetail;
	
	$scope.addBlog=function()
	{
		console.log('I am in add blog');
		
		$scope.blog.username=$rootScope.currentUser.username;
		
		$http.post('http://localhost:8081/EduCollaborationMiddleware/addBlog',$scope.blog)
		.then(function(response){
			alert("Blog Added");
		},function(errorresponse){
			alert("Problem Occurred while adding blog");
		});
	}
	
	$scope.incrementLikes=function(blogId)
	{
		console.log('I am in increment likes blog');
		
		$http.get('http://localhost:8081/EduCollaborationMiddleware/incrementLikes/'+blogId)
		.then(function(response){
			alert("Thank You for liking the blog");
		},function(errorresponse){
			alert("Error Occurred while liking the blog");
		});		
	}
	
	$scope.incrementDisLikes=function(blogId)
	{
		console.log('I am in increment dislikes blog');
		
		$http.get('http://localhost:8081/EduCollaborationMiddleware/incrementDisLikes/'+blogId)
		.then(function(response){
			alert("Oops!! Thank you for the feedback");
		},function(errorresponse){
			alert("Error Occurred while disliking the blog");
		});		
	}
	
	$scope.deleteBlog=function(blogId)
	{
		console.log('I am in deleting blog');
		
		$http.get('http://localhost:8081/EduCollaborationMiddleware/deleteBlog/'+blogId)
		.then(function(response){
			alert("Blog is succesfully deleted!!");
			showAllBlogs();
		},function(errorresponse){
			alert("Error Occurred while deleting the blog");
		});		
	}
	
	$scope.editBlog=function(blogId)
	{
		console.log('I am in edit blog');
		
		$http.get('http://localhost:8081/EduCollaborationMiddleware/getBlog/'+blogId)
		.then(function(response){
			alert("Blog is succesfully deleted!!");
			showAllBlogs();
		},function(errorresponse){
			alert("Error Occurred while deleting the blog");
		});		
	}
	
	function showAllBlogs()
	{
		console.log('I am in show blog');
		
		$http.get('http://localhost:8081/EduCollaborationMiddleware/showAllBlogs')
		.then(function(response){
			$scope.blogDetail=response.data;
		},function(errorresponse){
			alert("Problem Occurred while retrieving blogs");
		});
	}	
	showAllBlogs();
});